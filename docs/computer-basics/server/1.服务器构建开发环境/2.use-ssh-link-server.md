---
id: use-ssh-link-server
title: 设置你的服务器
---

## 准备工作

### 购买服务器

此处应有广告（doge

### 选择服务器系统

本文选择的是 `centos 7.6`

需要注意的是 `centos 8` 已经停止维护，`centos 7` 在2024年停止维护。

## 使用 ssh 连接到服务器

[前文](./why-i-use-server-to-develop)已经讲过，我们打算用服务器搭建一套属于自己的开发环境，mac 仅仅用来当作显示器～

`iterm2` 的配置见 [这里](../../dev-efficiency/mac/iterm2)

接下来我们使用 `ssh` 来连接数据库

### 普通登陆

`ssh root@172.0.0.0` 这里的 `ip` 地址使用你服务器的公网 `ip`

输入密码后就可以成功登陆了

### 快速登陆

每次都要输入 `ip` 实在是太麻烦了，有没有办法让计算机记住 `ip` 呢？

当然可以，`cd ~/.ssh && vim config`，vim 的用法见[这里](../../dev-efficiency/vim/1.notes)

```shell
# 修改 ssh 配置文件 ~/.ssh/config
Host OctoberRain
    HostName <PUBLIC_IP>
    User root
Host shiyu
    HostName <PUBLIC_IP>
    User root
```

然后就可以使用 `ssh OctoberRain` 进行登陆服务器了。

### 免密登陆

每次登陆都需要输入密码，未免太过麻烦，我们可以配置 ssh key 进行免密码登陆。

具体生成方式见[这里](../../dev-efficiency/mac/ssh)

只需要把本地环境的 `~/.ssh/id_rsa.pub` 粘贴到 远程服务器的 `~/.ssh/authorized_keys` 中即可。

除了手动复制粘贴的方法之外，我们还可以使用 `ssh-copy-id OctoberRain`, 一键复制，只需要输入密码即可。

成功之后，我们登陆服务器就不用输入密码啦

### 禁止使用密码登陆 

为了更大保障服务器的安全性，这里禁止密码登录。修改云服务器的 `sshd` 配置文件：`/etc/ssh/sshd_config`。其中 `PasswordAuthentication` 设置为 `no`，以此来禁用密码登录。

```sh
# 编辑服务器端的 /etc/ssh/sshd_config
# 禁用密码登录
Host *
  PasswordAuthentication no
```

### 持久化登陆

我们发现 `ssh` 登陆持续时间很短，怎么延长时间呢？

在客户端的 `ssh-config` 配置文件中，加两行配置搞定。

```sh
Host *
  ServerAliveInterval 60
```